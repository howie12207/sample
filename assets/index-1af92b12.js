import{r as a,F as f,z as g,j as s,S as w,x as y}from"./index-123815a0.js";import{c as N,s as j,f as S,d as b,P as E}from"./articleCard.module-6c45389d.js";import{E as k}from"./Edit-3a56f1e6.js";import{S as e}from"./Skeleton-813d987e.js";const I=()=>{var d;const c=a.useRef(null),o=f(),[t,h]=a.useState({}),[i,l]=a.useState(!0),m=a.useCallback(async()=>{const r=o.id||"";l(!0);const n=await N(r);l(!1),n&&h(n)},[o.id]);a.useEffect(()=>{m()},[m]),a.useEffect(()=>{t!=null&&t.name&&(document.title=`文章 - ${t==null?void 0:t.name} | Howie`)},[t]);const[p,x]=a.useState(""),u=g(r=>r.base.token);return s.jsxs("section",{className:`m-4 min-h-[calc(100vh-2rem-3.5rem)] rounded bg-red-50 p-4 ${j.articleId}`,children:[s.jsx(w,{children:s.jsx(y,{nodeRef:c,timeout:300,classNames:"page",unmountOnExit:!0,children:s.jsxs("article",{ref:c,children:[!i&&u&&s.jsx("div",{className:"my-2 flex justify-end gap-2",children:s.jsx(k,{className:"cursor-pointer",color:"primary",onClick:()=>x("edit")})}),s.jsx("div",{className:"mb-4 flex justify-between gap-x-4",children:i?s.jsxs(s.Fragment,{children:[s.jsx(e,{width:400}),s.jsx(e,{width:96})]}):s.jsxs(s.Fragment,{children:[s.jsx("h1",{className:"font-black text-red-700 sm:text-2xl",children:t.name}),s.jsx("time",{className:"flex-shrink-0 text-right text-sm sm:text-base",children:S(t.createTime||0)})]})}),i?s.jsxs(s.Fragment,{children:[s.jsx(e,{}),s.jsx(e,{}),s.jsx(e,{}),s.jsx(e,{width:"70%",style:{marginBottom:"2rem"}}),s.jsx(e,{}),s.jsx(e,{}),s.jsx(e,{}),s.jsx(e,{width:"70%",style:{marginBottom:"2rem"}}),s.jsx(e,{}),s.jsx(e,{}),s.jsx(e,{}),s.jsx(e,{width:"70%",style:{marginBottom:"2rem"}}),s.jsx(e,{}),s.jsx(e,{}),s.jsx(e,{}),s.jsx(e,{width:"70%"})]}):s.jsx("div",{className:`${j.content} whitespace-break-spaces`,dangerouslySetInnerHTML:{__html:t.content}}),!i&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"my-4 flex flex-wrap gap-4",children:(d=t.sorts)==null?void 0:d.map((r,n)=>s.jsxs("span",{className:"text-blue-800",children:["#",r]},n))}),s.jsxs("div",{className:"text-right",children:["最後更新時間：",s.jsx("time",{children:b(t.updateTime||0)})]})]})]})},i?"loading":"data")}),s.jsx(E,{popup:p,setPopup:x,editData:t,getArticle:m})]})};export{I as default};
